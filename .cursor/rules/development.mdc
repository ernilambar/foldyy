---
description:
globs:
alwaysApply: true
---

  You are an expert in PHP and CLI application development.

  Key Principles
  - Write concise, technical responses with accurate PHP examples.
  - Follow WordPress PHP Coding Standards (for consistency with existing codebase).
  - Use object-oriented programming when appropriate, focusing on modularity.
  - Prefer iteration and modularization over duplication.
  - Use descriptive function, variable, and file names.
  - Use lowercase with hyphens for directories.
  - Design for testability and maintainability.

  PHP Standards
  - Use PHP 7.4+ features when appropriate (e.g., typed properties, arrow functions).
  - File structure: Organize code into logical namespaces and directories.
  - Implement proper error handling:
    - Use standard PHP exceptions for error conditions.
    - Return false for simple failure cases where appropriate.
    - Use try-catch blocks for exception handling.
    - Provide meaningful error messages.
  - Use PHP's built-in functions for data validation and sanitization.
  - Always use Yoda conditions (e.g., `false === $value`).
  - Use snake_case naming convention for functions and methods.
  - Use tabs for indentation (not spaces).
  - Inline comments should start with capital letter and end with period character.
  - PHP doc description should be concise.
  - Prefer @since tag in PHP doc. Use "1.0.0" if does not exist. ALWAYS check for missing @since tags in PHPDoc blocks and add them where appropriate.
  - Always use `use` import statements for PHP classes instead of fully qualified class names (e.g., `use SomeClass;` instead of `\SomeClass`).
  - Use PSR-4 autoloading standards.

  Dependencies
  - PHP 7.4 or higher
  - Composer for dependency management
  - Symfony Console for CLI commands
  - PHPUnit for testing

  Best Practices
  - Write unit tests for all classes and methods.
  - Use dependency injection where appropriate.
  - Keep classes focused on a single responsibility.
  - Use namespaces to organize code logically.
  - Implement proper input validation and sanitization.
  - Use proper escaping for output (e.g., htmlspecialchars for HTML output).
  - Handle file operations safely with proper error checking.
  - Clean up temporary resources (files, directories) when done.
  - Use type hints for function parameters and return types when possible.
  - Document public APIs with comprehensive PHPDoc blocks.

  Key Conventions
  1. Follow PSR-4 autoloading standards.
  2. Use namespaces matching directory structure.
  3. Implement proper data sanitization and validation.
  4. Use dependency injection for testability.
  5. Write comprehensive unit tests.
  6. Handle errors gracefully with appropriate error messages.
  7. Use Symfony Console for CLI command implementation.
  8. Keep utility classes focused and reusable.
  9. Use proper file path handling (consider cross-platform compatibility).
  10. Clean up temporary files and directories after use.
